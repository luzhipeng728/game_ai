(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[746],{1539:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},2091:(e,t,a)=>{"use strict";a.d(t,{A:()=>N});var s=a(5155),c=a(6874),n=a.n(c),r=a(5695),i=a(7340),l=a(3578),d=a(7580),o=a(1586),p=a(9376),x=a(7434),m=a(2713),u=a(381);let g=[{name:"仪表盘",href:"/",icon:i.A},{name:"场景管理",href:"/scenes",icon:l.A},{name:"NPC管理",href:"/npcs",icon:d.A},{name:"卡片管理",href:"/cards",icon:o.A},{name:"AI配置",href:"/ai-configs",icon:p.A},{name:"配置模板",href:"/templates",icon:x.A},{name:"数据分析",href:"/analytics",icon:m.A},{name:"系统设置",href:"/settings",icon:u.A}];function h(){let e=(0,r.usePathname)();return(0,s.jsxs)("div",{className:"w-64 bg-gray-900 text-white min-h-screen",children:[(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h1",{className:"text-xl font-bold text-center",children:"苏丹的游戏"}),(0,s.jsx)("p",{className:"text-sm text-gray-400 text-center mt-2",children:"管理后台"})]}),(0,s.jsx)("nav",{className:"mt-6",children:g.map(t=>{let a=e===t.href,c=t.icon;return(0,s.jsxs)(n(),{href:t.href,className:"flex items-center px-6 py-3 text-left hover:bg-gray-800 transition-colors ".concat(a?"bg-gray-800 border-r-4 border-blue-500":""),children:[(0,s.jsx)(c,{className:"w-5 h-5 mr-3"}),t.name]},t.name)})})]})}var f=a(7924),y=a(3861),b=a(1007);function j(){return(0,s.jsx)("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("div",{className:"flex items-center space-x-4",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(f.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,s.jsx)("input",{type:"text",placeholder:"搜索...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("button",{className:"p-2 text-gray-600 hover:text-gray-900 relative",children:[(0,s.jsx)(y.A,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs rounded-full w-2 h-2"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center",children:(0,s.jsx)(b.A,{className:"w-4 h-4 text-gray-600"})}),(0,s.jsx)("span",{className:"text-sm text-gray-700",children:"管理员"})]})]})]})})}function N(e){let{children:t}=e;return(0,s.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,s.jsx)(h,{}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden",children:[(0,s.jsx)(j,{}),(0,s.jsx)("main",{className:"flex-1 overflow-y-auto p-6",children:t})]})]})}},4616:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(9946).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},5052:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>x});var s=a(5155),c=a(2115),n=a(2091),r=a(4616);let i=(0,a(9946).A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);var l=a(1539),d=a(3717),o=a(2525),p=a(5731);function x(){let[e,t]=(0,c.useState)([]),[a,x]=(0,c.useState)(!0),[m,u]=(0,c.useState)(!1),[g,h]=(0,c.useState)(null),[f,y]=(0,c.useState)({card_id:"",name:"",rarity:"common",category:"attribute",description:"",effect_type:"instant"});(0,c.useEffect)(()=>{b()},[]);let b=async()=>{try{let e=await p.Pb.getCards();t(e.data)}catch(e){console.error("获取卡片列表失败:",e),alert("获取卡片列表失败，请检查API服务是否正常运行")}finally{x(!1)}},j=async e=>{e.preventDefault();try{g?(await p.Pb.updateCard(g.id,f),alert("卡片更新成功")):(await p.Pb.createCard(f),alert("卡片创建成功")),u(!1),h(null),v(),b()}catch(e){console.error("操作失败:",e),alert("操作失败，请检查输入数据")}},N=async e=>{if(confirm('确定要删除卡片 "'.concat(e.name,'" 吗？')))try{await p.Pb.deleteCard(e.id),alert("卡片删除成功"),b()}catch(e){console.error("删除失败:",e),alert("删除失败")}},v=()=>{y({card_id:"",name:"",rarity:"common",category:"attribute",description:"",effect_type:"instant"})};return a?(0,s.jsx)(n.A,{children:(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)("div",{className:"text-lg text-gray-600",children:"加载中..."})})}):(0,s.jsx)(n.A,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"卡片管理"}),(0,s.jsx)("p",{className:"text-gray-600",children:"管理游戏卡片和效果"})]}),(0,s.jsxs)("button",{onClick:()=>{h(null),v(),u(!0)},className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[(0,s.jsx)(r.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{children:"新建卡片"})]})]}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"卡片信息"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"稀有度"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"类型"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"效果类型"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"操作"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>{var t,a;return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(i,{className:"w-5 h-5 text-yellow-500 mr-2"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,s.jsxs)("div",{className:"text-sm text-gray-500",children:["ID: ",e.card_id]}),e.description&&(0,s.jsx)("div",{className:"text-sm text-gray-500 mt-1 truncate max-w-xs",children:e.description})]})]})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat((e=>{switch(e){case"legendary":return"bg-yellow-100 text-yellow-800";case"epic":return"bg-purple-100 text-purple-800";case"rare":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}})(e.rarity)),children:{legendary:"传说",epic:"史诗",rare:"稀有",common:"普通"}[t=e.rarity]||t})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:{attribute:"属性增强",access:"通行证",influence:"影响判定",special:"特殊功能"}[a=e.category]||a}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(l.A,{className:"w-4 h-4 text-blue-500 mr-1"}),(0,s.jsx)("span",{className:"text-sm text-gray-900",children:e.effect_type})]})}),(0,s.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:[(0,s.jsx)("button",{onClick:()=>{h(e),y({card_id:e.card_id,name:e.name,rarity:e.rarity,category:e.category,description:e.description||"",effect_type:e.effect_type}),u(!0)},className:"text-blue-600 hover:text-blue-900",title:"编辑",children:(0,s.jsx)(d.A,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>N(e),className:"text-red-600 hover:text-red-900",title:"删除",children:(0,s.jsx)(o.A,{className:"w-4 h-4"})})]})]},e.id)})})]})}),m&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:g?"编辑卡片":"新建卡片"}),(0,s.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"卡片ID"}),(0,s.jsx)("input",{type:"text",value:f.card_id,onChange:e=>y({...f,card_id:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:!!g})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"卡片名称"}),(0,s.jsx)("input",{type:"text",value:f.name,onChange:e=>y({...f,name:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"稀有度"}),(0,s.jsxs)("select",{value:f.rarity,onChange:e=>y({...f,rarity:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"common",children:"普通"}),(0,s.jsx)("option",{value:"rare",children:"稀有"}),(0,s.jsx)("option",{value:"epic",children:"史诗"}),(0,s.jsx)("option",{value:"legendary",children:"传说"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"卡片类型"}),(0,s.jsxs)("select",{value:f.category,onChange:e=>y({...f,category:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"attribute",children:"属性增强"}),(0,s.jsx)("option",{value:"access",children:"通行证"}),(0,s.jsx)("option",{value:"influence",children:"影响判定"}),(0,s.jsx)("option",{value:"special",children:"特殊功能"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"效果类型"}),(0,s.jsxs)("select",{value:f.effect_type,onChange:e=>y({...f,effect_type:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"instant",children:"立即效果"}),(0,s.jsx)("option",{value:"duration",children:"持续效果"}),(0,s.jsx)("option",{value:"permanent",children:"永久效果"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"描述"}),(0,s.jsx)("textarea",{value:f.description,onChange:e=>y({...f,description:e.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,s.jsx)("button",{type:"button",onClick:()=>u(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"取消"}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:g?"更新":"创建"})]})]})]})})]})})}},5731:(e,t,a)=>{"use strict";a.d(t,{BB:()=>r,ER:()=>n,Fw:()=>c,Pb:()=>i,hM:()=>l});let s=a(3464).A.create({baseURL:"",headers:{"Content-Type":"application/json"},timeout:1e4}),c={getScenes:()=>s.get("/api/scenes/"),getScene:e=>s.get("/api/scenes/".concat(e)),createScene:e=>s.post("/api/scenes/",e),updateScene:(e,t)=>s.put("/api/scenes/".concat(e),t),deleteScene:e=>s.delete("/api/scenes/".concat(e)),getSceneConfig:e=>s.get("/api/scenes/".concat(e,"/config")),getSceneNPCs:e=>s.get("/api/scenes/".concat(e,"/npcs")),addSceneNPC:(e,t)=>s.post("/api/scenes/".concat(e,"/npcs"),t),removeSceneNPC:(e,t)=>s.delete("/api/scenes/".concat(e,"/npcs/").concat(t)),getSceneRewards:e=>s.get("/api/scenes/".concat(e,"/rewards")),saveSceneRewards:(e,t)=>s.post("/api/scenes/".concat(e,"/rewards"),t),getSceneExtendedRewards:e=>s.get("/api/scenes/".concat(e,"/extended-rewards")),saveSceneExtendedRewards:(e,t)=>s.post("/api/scenes/".concat(e,"/extended-rewards"),t),getSceneRequirements:e=>s.get("/api/scenes/".concat(e,"/requirements")),saveSceneRequirements:(e,t)=>s.post("/api/scenes/".concat(e,"/requirements"),t),getSceneCardBindings:e=>s.get("/api/scenes/".concat(e,"/card-bindings")),addSceneCardBinding:(e,t)=>s.post("/api/scenes/".concat(e,"/card-bindings"),t),removeSceneCardBinding:(e,t)=>s.delete("/api/scenes/".concat(e,"/card-bindings/").concat(t)),getAvailableCards:()=>s.get("/api/cards/"),getAvailablePlayerNPCs:()=>s.get("/api/npcs/"),testScene:e=>s.post("/api/scenes/".concat(e,"/test"))},n={getNPCs:()=>s.get("/api/npcs/"),getNPC:e=>s.get("/api/npcs/".concat(e)),createNPC:e=>s.post("/api/npcs/",e),updateNPC:(e,t)=>s.put("/api/npcs/".concat(e),t),deleteNPC:e=>s.delete("/api/npcs/".concat(e))},r={getAIConfigs:()=>s.get("/api/ai-configs/"),getAIConfig:e=>s.get("/api/ai-configs/".concat(e)),createAIConfig:e=>s.post("/api/ai-configs/",e),updateAIConfig:(e,t)=>s.put("/api/ai-configs/".concat(e),t),deleteAIConfig:e=>s.delete("/api/ai-configs/".concat(e)),getAIPerformance:e=>s.get("/api/ai-configs/".concat(e,"/performance")),testAIConfig:(e,t)=>s.post("/api/ai-configs/".concat(e,"/test"),t),optimizeAIConfig:e=>s.post("/api/ai-configs/".concat(e,"/optimize")),getAITypes:()=>s.get("/api/ai-configs/types/enum")},i={getCards:()=>s.get("/api/cards/"),getCard:e=>s.get("/api/cards/".concat(e)),createCard:e=>s.post("/api/cards/",e),updateCard:(e,t)=>s.put("/api/cards/".concat(e),t),deleteCard:e=>s.delete("/api/cards/".concat(e))},l={getTemplates:e=>s.get("/api/templates/",{params:e}),getTemplate:e=>s.get("/api/templates/".concat(e)),createTemplate:e=>s.post("/api/templates/",e),updateTemplate:(e,t)=>s.put("/api/templates/".concat(e),t),deleteTemplate:e=>s.delete("/api/templates/".concat(e)),createFromScene:e=>s.post("/api/templates/from-scene",e),createFromAIConfig:(e,t,a)=>s.post("/api/templates/from-ai-config/".concat(e),null,{params:{template_name:t,description:a}}),applyToScene:(e,t)=>s.post("/api/templates/".concat(e,"/apply-to-scene/").concat(t)),getCategories:()=>s.get("/api/templates/categories/enum"),getTypes:()=>s.get("/api/templates/types/enum")}},9688:(e,t,a)=>{Promise.resolve().then(a.bind(a,5052))}},e=>{e.O(0,[291,488,441,964,358],()=>e(e.s=9688)),_N_E=e.O()}]);